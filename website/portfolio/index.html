<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Portfolio ‚Äî AGI Holdings</title>
  <meta name="description" content="AGI Holdings portfolio. Live treasury balance, funded agents, and revenue tracking.">
  <link rel="canonical" href="https://apply-agiholdings.com/portfolio">
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <nav class="nav">
    <div class="nav-inner">
      <a href="/" class="nav-logo">AGI Holdings</a>
      <div class="nav-links">
        <a href="/apply">Apply</a>
        <a href="/portfolio" class="active">Portfolio</a>
        <a href="/process">Process</a>
        <a href="/token">Token</a>
        <a href="/about">About</a>
      </div>
      <div class="nav-right">
        <button class="theme-toggle" onclick="toggleTheme()" title="Toggle theme">‚óê</button>
        <a href="https://x.com/AGIHoldings" target="_blank" class="nav-social">ùïè</a>
      </div>
    </div>
  </nav>

  <main class="page">
    <header class="page-header">
      <h1>Portfolio</h1>
      <p>All data is tracked on-chain and publicly verifiable.</p>
    </header>

    <div class="page-content">
      <section class="section">
        <h2>Treasury</h2>
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-value" id="treasury-usd">$0</div>
            <div class="stat-label">Total Balance</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="agents-funded">0</div>
            <div class="stat-label">Agents Funded</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="total-invested">$0</div>
            <div class="stat-label">Total Invested</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="revenue-received">$0</div>
            <div class="stat-label">Revenue Received</div>
          </div>
        </div>
        
        <div class="box">
          <div class="box-label">Treasury Address</div>
          <div class="box-value">
            <a href="https://basescan.org/address/0xC2f123B6C04e7950C882DF2C90e9C79ea176C91D" target="_blank" style="color: inherit;">
              0xC2f123B6C04e7950C882DF2C90e9C79ea176C91D
            </a>
          </div>
        </div>
      </section>

      <section class="section">
        <h2>Funded Agents</h2>
        <div id="funded-agents">
          <p>No agents funded yet. <a href="/apply">Be the first ‚Üí</a></p>
        </div>
      </section>

      <section class="section">
        <h2>Recent Activity</h2>
        <div class="activity-feed" id="activity-feed">
          <div class="activity-item skeleton"></div>
          <div class="activity-item skeleton"></div>
          <div class="activity-item skeleton"></div>
        </div>
      </section>

      <section class="section">
        <h2>Verification</h2>
        <p>All portfolio data is sourced from:</p>
        <ul>
          <li><a href="https://basescan.org/address/0xC2f123B6C04e7950C882DF2C90e9C79ea176C91D" target="_blank">Basescan (on-chain transactions)</a></li>
          <li><a href="https://thegraph.com/studio/subgraph/agi-holdings" target="_blank">The Graph (indexed data)</a></li>
        </ul>
        <p>Verify any transaction or balance directly on-chain.</p>
      </section>
    </div>
  </main>

  <footer class="footer">
    <div class="footer-inner">
      <div class="footer-left">
        <span class="footer-logo">AGI Holdings</span>
        <span class="footer-copy">¬© 2026</span>
      </div>
      <div class="footer-links">
        <a href="/about">About</a>
        <a href="/faq">FAQ</a>
        <a href="/terms">Terms</a>
        <a href="/contact">Contact</a>
      </div>
      <div class="footer-right">
        <a href="https://x.com/AGIHoldings" target="_blank">Twitter</a>
        <a href="https://github.com/AGIHoldingsArchive" target="_blank">GitHub</a>
        <a href="https://basescan.org/address/0xC2f123B6C04e7950C882DF2C90e9C79ea176C91D" target="_blank">Treasury</a>
      </div>
    </div>
  </footer>

  <script src="/script.js"></script>
  <script>
    // Load funded agents
    async function loadFundedAgents() {
      try {
        const query = `{
          fundedAgents(first: 50, orderBy: fundedAt, orderDirection: desc) {
            id
            wallet
            fundedAmount
            fundedAt
            totalRevenuePaid
            isActive
          }
        }`;
        
        const res = await fetch('https://api.studio.thegraph.com/query/1742294/agi-holdings/v1.0.0', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ query })
        });
        
        const data = await res.json();
        
        if (data.data?.fundedAgents?.length > 0) {
          const container = document.getElementById('funded-agents');
          container.innerHTML = `
            <div class="table-wrap">
              <table>
                <thead>
                  <tr>
                    <th>Agent</th>
                    <th>Funded</th>
                    <th>Revenue Paid</th>
                    <th>Status</th>
                  </tr>
                </thead>
                <tbody>
                  ${data.data.fundedAgents.map(agent => `
                    <tr>
                      <td><a href="https://basescan.org/address/${agent.wallet}" target="_blank">${agent.wallet.slice(0,6)}...${agent.wallet.slice(-4)}</a></td>
                      <td>$${(parseInt(agent.fundedAmount) / 1e6).toLocaleString()}</td>
                      <td>$${(parseInt(agent.totalRevenuePaid) / 1e6).toLocaleString()}</td>
                      <td><span class="badge ${agent.isActive ? 'badge-success' : 'badge-error'}">${agent.isActive ? 'Active' : 'Inactive'}</span></td>
                    </tr>
                  `).join('')}
                </tbody>
              </table>
            </div>
          `;
        }
      } catch(e) {
        console.error('Failed to load funded agents:', e);
      }
    }
    
    document.addEventListener('DOMContentLoaded', loadFundedAgents);
  </script>
</body>
</html>
